import React, { useCallback, useEffect, useState } from 'react'

import styles from './styles.css'
// eslint-disable-next-line import/no-cycle
import SearchBarOrEmpty, { useSearchBar } from './search-bar'
import { AppBar, Button, Icon, Logo } from '../../elements'
import { classNames } from '../../utils'

const SERVICES_ILLUSTRATION = `<svg viewBox="0 0 12953 10812" width="160" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10202.6 395.468c-1508.65-862.225-2844.81-152.39-3513.2 603.467C6021.02 1754.79 5523.01 2518.27 4683.95 2658.47c-839.07 140.2-2112.13-215.48-3060.61 452.6-948.481 668.08-944.824 2442.51-193.84 3448.59 750.98 1006.08 2693.95 1487.03 4935.62 1810.4a5909.74 5909.74 0 002411.12-133.8l1018.27-369.7c497.39-227.06 914.39-482.77 1267.29-690.33 537-316.97 726.3-1089.59 829-1655.57 149.1-848.13 136.2-1716.83-38.1-2560.16-224.9-1062.46-737.9-2044.161-1650.1-2565.032z" fill="%23B75400"/><path opacity=".8" d="M10202.6 395.468c-1508.65-862.225-2844.81-152.39-3513.2 603.467C6021.02 1754.79 5523.01 2518.27 4683.95 2658.47c-839.07 140.2-2112.13-215.48-3060.61 452.6-948.481 668.08-944.824 2442.51-193.84 3448.59 750.98 1006.08 2693.95 1487.03 4935.62 1810.4a5909.74 5909.74 0 002411.12-133.8l1018.27-369.7c497.39-227.06 914.39-482.77 1267.29-690.33 537-316.97 726.3-1089.59 829-1655.57 149.1-848.13 136.2-1716.83-38.1-2560.16-224.9-1062.46-737.9-2044.161-1650.1-2565.032z" fill="%23fff"/><path opacity=".8" d="M12508.9 1451.53c-34.1-563.231-418.8-747.929-662.6-479.721-57.9 65.421-96.7 145.531-112.2 231.551-15.4 86.01-6.9 174.62 24.7 256.1 85.7 231.33 232.9 641.87 320.7 963.11 129.2 474.23 85.9 840.58 236.8 646.74 150.8-193.84 235.6-906.42 192.6-1617.78z" fill="%23B75400"/><path opacity=".8" d="M12508.9 1451.53c-34.1-563.231-418.8-747.929-662.6-479.721-57.9 65.421-96.7 145.531-112.2 231.551-15.4 86.01-6.9 174.62 24.7 256.1 85.7 231.33 232.9 641.87 320.7 963.11 129.2 474.23 85.9 840.58 236.8 646.74 150.8-193.84 235.6-906.42 192.6-1617.78z" fill="%23fff"/><path d="M5999.99 1365.28c236.81-42.97 538.55-603.465 926.53-840.585 387.99-237.119 43.28-409.625-322.45-237.119 0 0-280.4 64.614-495.88 495.878-215.48 431.266-345.32 624.806-108.2 581.826z" fill="%23B75400"/><path opacity=".8" d="M5999.99 1365.28c236.81-42.97 538.55-603.465 926.53-840.585 387.99-237.119 43.28-409.625-322.45-237.119 0 0-280.4 64.614-495.88 495.878-215.48 431.266-345.32 624.806-108.2 581.826z" fill="%23fff"/><path d="M5612 1063.55c192.32-77.112 402.01-600.725 182.87-573.905a162.815 162.815 0 00-76.03 32.183 162.769 162.769 0 00-50.45 65.347c-70.1 155.744-229.5 545.555-56.39 476.375z" fill="%23B75400"/><path opacity=".8" d="M5612 1063.55c192.32-77.112 402.01-600.725 182.87-573.905a162.815 162.815 0 00-76.03 32.183 162.769 162.769 0 00-50.45 65.347c-70.1 155.744-229.5 545.555-56.39 476.375z" fill="%23fff"/><path d="M6786.33 10811.7c3405.57 0 6166.37-102.7 6166.37-229.2 0-126.6-2760.8-229.2-6166.37-229.2-3405.57 0-6166.332 102.6-6166.332 229.2 0 126.5 2760.762 229.2 6166.332 229.2z" fill="%23B75400"/><path opacity=".8" d="M6786.33 10811.7c3405.57 0 6166.37-102.7 6166.37-229.2 0-126.6-2760.8-229.2-6166.37-229.2-3405.57 0-6166.332 102.6-6166.332 229.2 0 126.5 2760.762 229.2 6166.332 229.2z" fill="%23fff"/><path d="M9750.01 1967.22a45.718 45.718 0 00-45.71 45.72v234.38h-835.41v-234.38a45.717 45.717 0 00-45.71-45.72c-12.13 0-23.76 4.82-32.33 13.39a45.76 45.76 0 00-13.39 32.33v5903.61c0 12.12 4.82 23.75 13.39 32.32a45.682 45.682 0 0032.33 13.39c12.12 0 23.75-4.81 32.32-13.39a45.676 45.676 0 0013.39-32.32V6595.93h835.41v1320.62c0 12.12 4.81 23.75 13.39 32.32a45.676 45.676 0 0032.32 13.39c12.13 0 23.76-4.81 32.33-13.39a45.676 45.676 0 0013.39-32.32V2012.03a45.715 45.715 0 00-13.71-31.74 45.706 45.706 0 00-32.01-13.07zm-45.71 4538.19h-835.41v-296.25h835.41v296.25zm0-387.99h-835.41v-295.94h835.41v295.94zm0-387.68h-835.41v-295.02h835.41v295.02zm0-387.37h-835.41v-293.81h835.41v293.81zm0-387.08h-835.41v-290.45h835.41v290.45zm0-385.85h-835.41v-292.28h835.41v292.28zm0-384.02h-835.41v-295.03h835.41v295.03zm0-387.68h-835.41v-295.03h835.41v295.03zm0-386.77h-835.41v-295.94h835.41v295.94zm0-387.68h-835.41v-296.55h835.41v296.55zm0-387.99h-835.41v-296.55h835.41v296.55z" fill="%23fff"/><path d="M1836.68 6726.68s684.24-936.59 350.5-1158.17c-347.14-228.89-510.2 464.49-583.65 804.93-156.66 726.6-112.47 880.82-7.32 721.11l240.47-367.87z" fill="%23B75400"/><path opacity=".5" d="M1836.68 6726.68s684.24-936.59 350.5-1158.17c-347.14-228.89-510.2 464.49-583.65 804.93-156.66 726.6-112.47 880.82-7.32 721.11l240.47-367.87z" fill="%23fff"/><path d="M2093.31 7302.72s951.22-663.82 707.09-980.18c-253.88-329.47-633.33 274.3-813.46 571.77-384.33 636.38-392.25 796.7-241.08 679.66l347.45-271.25z" fill="%23B75400"/><path opacity=".5" d="M2093.31 7302.72s951.22-663.82 707.09-980.18c-253.88-329.47-633.33 274.3-813.46 571.77-384.33 636.38-392.25 796.7-241.08 679.66l347.45-271.25z" fill="%23fff"/><path d="M2114.03 8072.59s822.91-369.7 682.41-647.05c-146.3-288.62-523.92 117.34-704.65 319.11-386.16 430.96-415.42 552.26-282.84 484.91l305.08-156.97z" fill="%23B75400"/><path opacity=".5" d="M2114.03 8072.59s822.91-369.7 682.41-647.05c-146.3-288.62-523.92 117.34-704.65 319.11-386.16 430.96-415.42 552.26-282.84 484.91l305.08-156.97z" fill="%23fff"/><path d="M2162.8 8845.82s822.91-369.7 682.71-647.05c-146.6-288.32-523.92 117.34-704.96 319.41-385.85 430.96-415.42 552.27-282.53 484.61l304.78-156.97z" fill="%23B75400"/><path opacity=".5" d="M2162.8 8845.82s822.91-369.7 682.71-647.05c-146.6-288.32-523.92 117.34-704.96 319.41-385.85 430.96-415.42 552.27-282.53 484.61l304.78-156.97z" fill="%23fff"/><path d="M1197.56 7118.02S292.969 6391.73 57.983 6714.8c-243.825 335.25 440.713 531.23 777.496 620.22 718.671 189.88 874.721 152.4 719.891 40.24l-357.81-257.24z" fill="%23B75400"/><path opacity=".5" d="M1197.56 7118.02S292.969 6391.73 57.983 6714.8c-243.825 335.25 440.713 531.23 777.496 620.22 718.671 189.88 874.721 152.4 719.891 40.24l-357.81-257.24z" fill="%23fff"/><path d="M1224.38 7724.84S193.61 7192.69 27.504 7556.3c-172.811 378.23 537.329 433.09 883.865 453.2 742.141 43.28 887.831-24.38 713.801-103.62l-400.79-181.04z" fill="%23B75400"/><path opacity=".5" d="M1224.38 7724.84S193.61 7192.69 27.504 7556.3c-172.811 378.23 537.329 433.09 883.865 453.2 742.141 43.28 887.831-24.38 713.801-103.62l-400.79-181.04z" fill="%23fff"/><path d="M1349.03 8405.11s-883.86-426.69-1015.83-114.9c-137.456 323.98 464.181 353.85 758.9 362.69 628.46 19.5 750.07-41.45 601.03-102.41l-344.1-145.38z" fill="%23B75400"/><path opacity=".5" d="M1349.03 8405.11s-883.86-426.69-1015.83-114.9c-137.456 323.98 464.181 353.85 758.9 362.69 628.46 19.5 750.07-41.45 601.03-102.41l-344.1-145.38z" fill="%23fff"/><path d="M1392.31 8954.63s-833.877-518.13-998.154-222.18c-170.982 307.52 424.255 401.09 716.234 441.32 622.97 85.95 750.07 38.7 609.56-39.62l-327.64-179.52z" fill="%23B75400"/><path opacity=".5" d="M1392.31 8954.63s-833.877-518.13-998.154-222.18c-170.982 307.52 424.255 401.09 716.234 441.32 622.97 85.95 750.07 38.7 609.56-39.62l-327.64-179.52z" fill="%23fff"/><path d="M1313.37 6197.89s-156.65-1360.24-670.513-1221.26c-533.672 145.08-86.863 833.27 139.894 1166.09 481.859 708.31 659.239 786.34 621.139 565.07l-90.52-509.9z" fill="%23B75400"/><path opacity=".5" d="M1313.37 6197.89s-156.65-1360.24-670.513-1221.26c-533.672 145.08-86.863 833.27 139.894 1166.09 481.859 708.31 659.239 786.34 621.139 565.07l-90.52-509.9z" fill="%23fff"/><path d="M748.006 5472.2s782.064 1465.39 903.374 2145.66c139.59 781.46 162.14 1654.35 65.83 2338.28M1527.94 7165.26l383.11-1173.41M1651.38 7617.86l721.11-906.72M1605.36 7452.97L561.176 7014.4M1741.9 8231.99l785.11-601.63M1700.14 7973.85l-820.163-170.68M1739.46 8602l-635.17-100.58M1793.1 9008.58l427.3-382.81M1784.57 9180.78l-729.95-183.48" stroke="%23B75400" stroke-width="1.252" stroke-linecap="round" stroke-linejoin="round"/><path d="M1243.88 9404.18h862.84v178.6h-75.28l-155.74 974.42h-400.79l-155.74-974.42h-75.29v-178.6z" fill="%23B75400"/><path opacity=".5" d="M1243.88 9404.18h862.84v178.6h-75.28l-155.74 974.42h-400.79l-155.74-974.42h-75.29v-178.6z" fill="%23fff"/><path d="M2664.77 203.152a281.004 281.004 0 00-279.79-55.775c-167.63 55.775-328.25 298.075-287.71 503.193 28.35 142.028 160.01 351.41 199.94 431.26 39.92 79.86-16.16 214.88-142.95 495.27-126.78 280.4-175.85 543.43 191.71 775.06 367.57 231.63 783.59-135.93 996.94-399.57 213.35-263.63-160.01-870.76-192.01-1127.686-32-256.93-86.86-749.456-486.13-621.752z" fill="%23263238"/><path d="M3528.83 1970.27a880.115 880.115 0 01-323.66 205.66 880.242 880.242 0 01-380.39 48.53l-88.08 367.26 167.63 838.45 1094.47-567.2-247.79-640.04-222.18-252.66z" fill="%23B75400" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path opacity=".3" d="M3528.83 1970.27a880.115 880.115 0 01-323.66 205.66 880.242 880.242 0 01-380.39 48.53l-88.08 367.26 167.63 838.45 1094.47-567.2-247.79-640.04-222.18-252.66z" fill="%23263238"/><path d="M3528.83 1970.27L3361.2 859.649l-496.8 101.797-247.78 159.704s-295.64 231.94-295.64 255.71c0 23.78 500.15 860.7 500.15 860.7a927.101 927.101 0 00382.35-58.18 927.269 927.269 0 00325.35-209.11z" fill="%23fff"/><path d="M3528.83 1970.27L3361.2 859.649l-496.8 101.797-247.78 159.704s-295.64 231.94-295.64 255.71c0 23.78 500.15 860.7 500.15 860.7a927.101 927.101 0 00382.35-58.18 927.269 927.269 0 00325.35-209.11z" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path opacity=".5" d="M2862.27 1922.73s350.19-259.68 317.89-182.87c-32.31 76.8-274.31 268.51-339.22 274.3-64.92 5.79 21.33-91.43 21.33-91.43z" fill="%23B75400"/><path d="M2872.94 1429.59l13.71 14.32 85.34 90.22 21.95 346.54 104.54-16.46-82.6-324.59 132.28 274.91 110.02-110.03-236.51-214.56-5.79-170.38-121-60.65" fill="%23263238"/><path d="M2680.62 1018.14s-103.93 47.85-103.93 143.55c0 95.7 112.47 323.37 182.87 371.22 70.4 47.85 191.1-171.29 191.1-171.29s182.87 87.78 231.63 7.93c48.77-79.85-111.85-343.49-215.48-415.418-103.62-71.928-286.19 64.008-286.19 64.008z" fill="%23fff" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M2592.84 922.129a1896.006 1896.006 0 0171.93 223.711c15.85 79.85 231.64 215.78 255.41 223.71 23.77 7.92 39.93-255.71 39.93-255.71l-63.7-311.489-303.57 119.778z" fill="%23fff"/><path d="M2903.11 835.572a309.333 309.333 0 00-40.84-8.534l-220.36 77.719-28.95 75.586c14.63 40.837 33.22 95.697 44.5 140.197a245.334 245.334 0 00125.87 52.73c66.14 4.57 124.35-46.63 165.5-109.42l-45.72-228.278z" fill="%23B75400" opacity=".5"/><path d="M2592.84 922.129a1896.006 1896.006 0 0171.93 223.711c15.85 79.85 231.64 215.78 255.41 223.71 23.77 7.92 39.93-255.71 39.93-255.71l-63.7-311.489-303.57 119.778z" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M2448.99 786.197s-88.08-71.623-88.08 0c0 71.624 80.15 111.855 143.85 111.855" fill="%23fff"/><path d="M2448.99 786.197s-88.08-71.623-88.08 0c0 71.624 80.15 111.855 143.85 111.855" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M2920.18 554.564s56.08-87.777 71.93 8.229c7.3 62.5-9.85 125.403-47.85 175.554l-24.08-183.783z" fill="%23fff" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><g opacity=".5"><path d="M2448.99 786.197s-88.08-71.623-88.08 0c0 71.624 80.15 111.855 143.85 111.855" fill="%23B75400"/><path d="M2448.99 786.197s-88.08-71.623-88.08 0c0 71.624 80.15 111.855 143.85 111.855" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/></g><path opacity=".5" d="M2920.18 554.564s56.08-87.777 71.93 8.229c7.3 62.5-9.85 125.403-47.85 175.554l-24.08-183.783z" fill="%23B75400" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M2349.93 555.173s68.58 285.58 215.79 426.694c147.21 141.113 304.78 142.333 359.34-109.112 44.8-207.251-66.45-483.687-66.45-483.687S2499.58 93.43 2349.93 555.173z" fill="%23fff"/><path d="M2605.65 296.109l55.77 140.2s87.78-19.506 137.15 86.557c49.38 106.064 99.06 261.502 70.71 381.891-27.12 114.593-91.43 152.393-190.49 155.133 107.9 46.02 205.73 0 246.27-187.745 44.8-207.251-66.45-483.687-66.45-483.687s-121.6-99.663-252.96-92.349z" fill="%23B75400" opacity=".5"/><path d="M2349.93 555.173s68.58 285.58 215.79 426.694c147.21 141.113 304.78 142.333 359.34-109.112 44.8-207.251-66.45-483.687-66.45-483.687S2499.58 93.43 2349.93 555.173z" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M2622.41 706.04c8.53 16.153 7.01 33.526-3.35 39.012-10.37 5.486-25.61-3.353-33.83-19.506-8.23-16.154-7.01-33.222 3.35-38.708 10.36-5.486 25.6 3.353 33.83 19.202zM2781.5 656.665c6.1 17.068 2.14 34.136-8.83 37.793-10.98 3.657-25-6.705-30.48-23.773-5.49-17.068-2.14-34.135 8.84-37.793 10.97-3.657 24.38 7.315 30.47 23.773z" fill="%23263238"/><path d="M2792.48 565.231a68.586 68.586 0 00-42.28-11.537 68.556 68.556 0 00-40.62 16.414c-43.89 34.135 39.01 205.117 39.01 205.117s1.52 53.946-67.66 28.954M2792.48 859.649a78.671 78.671 0 01-21.3 29.115 78.634 78.634 0 01-32.05 16.542 78.66 78.66 0 01-68.57-15.178M2606.86 610.643s-78.02-73.452-112.15 68.271" stroke="%23263238" stroke-width=".5" stroke-linecap="round" stroke-linejoin="round"/><path d="M2863.18 298.548c-85.64-74.367-154.82-73.452-185-63.699a204.478 204.478 0 00-93.56-30.478c-239.56-32.002-271.56 152.39-271.56 327.639 0 175.249-152.39 383.414-47.86 407.492a124.96 124.96 0 0085.04-9.744 124.923 124.923 0 0058.82-62.184s111.86-182.869 111.86-311.791 139.28-116.731 139.28-116.731a74.345 74.345 0 0123.05-21.904 74.318 74.318 0 0130.09-10.276 74.356 74.356 0 0159.02 19.379c63.39 54.251 70.71 117.95 121.91 134.408 51.21 16.458 136.85-65.832 136.85-65.832a1205.57 1205.57 0 00-167.94-196.279z" fill="%23263238"/><path d="M2666.91 346.398s-96.31-77.414-182.87 9.449c-86.56 86.862-77.11 251.139-106.07 357.508-28.95 106.368-106.36 125.569-106.36 125.569" stroke="%23fff" stroke-width=".5" stroke-linecap="round" stroke-linejoin="round"/><path d="M2599.55 317.445s-103.93-103.016-234.68 27.43c-99.66 99.968-55.17 165.496-74.67 329.773M2715.37 297.938s182.87-86.862 260.89 135.323" stroke="%23fff" stroke-width=".5" stroke-linecap="round" stroke-linejoin="round"/><path d="M2320.98 1377.47l-276.44 1112.45 810.72 229.81 39.93-143.86-532.45-245.65 180.73-640.04s-23.77-119.78-152.39-255.41" fill="%23fff"/><path d="M2896.41 2576.78l-532.46-245.65 180.74-640.04a491.4 491.4 0 00-67.97-149.04l-17.37-13.1v176.77c0 113.07-141.42 473.63-191.1 558.36-49.68 84.73-127.09 190.79-127.09 190.79l155.44-70.71 589.14 235.9 10.67-43.28z" fill="%23B75400" opacity=".5"/><path d="M2320.98 1377.47l-276.44 1112.45 810.72 229.81 39.93-143.86-532.45-245.65 180.73-640.04s-23.77-119.78-152.39-255.41" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M4600.44 1711.51l-613.83-128.92-626.94-724.465 92.66 582.745 384.63 366.34 772.93 35.36-9.45-131.06z" fill="%23fff"/><path d="M3359.67 858.125l74.68 465.095 47.54 145.38 6.1 5.49c17.98-18.59 119.47-124.05 145.38-124.05 25.9 0 318.19 254.49 275.82 274.3l-42.67 21.03 728.13 120.09 5.18-55.78-612.61-128.61-627.55-722.945z" fill="%23B75400" opacity=".5"/><path d="M4600.44 1711.51l-613.83-128.92-626.94-724.465 92.66 582.745 384.63 366.34 772.93 35.36-9.45-131.06z" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M10330.6 7879.97L2513.91 6734.61a94.84 94.84 0 01-62.2-37.27 94.834 94.834 0 01-17.66-70.32l651.02-4440.96a94.248 94.248 0 0112.35-34.78 94.469 94.469 0 0194.93-45.08l148.12 21.64c18.76 2.82 37.94-.1 55.02-8.36a94.236 94.236 0 0040.68-37.96l196.59-339.83a89.711 89.711 0 0123.77-27.44 217.964 217.964 0 01159.4-39.01l1970.41 288.93a217.65 217.65 0 01117.95 56.69 91.31 91.31 0 0120.11 30.48l175.25 434.01a94.217 94.217 0 0029.23 39.03 94.115 94.115 0 0044.84 19.18l4835.38 708.92a94.666 94.666 0 0162.2 37.07c15.1 20.11 21.5 45.36 17.9 70.22l-651 4440.65c-3.8 24.8-17.2 47.09-37.4 62-20.1 14.91-45.4 21.22-70.2 17.55v0z" fill="%23263238" stroke="%23263238" stroke-miterlimit="10"/><path d="M10413.8 7858.33H2665.99c-22.49 0-44.77-4.43-65.55-13.04a171.153 171.153 0 01-55.57-37.13 171.259 171.259 0 01-37.13-55.57 171.394 171.394 0 01-13.03-65.54V3351.84c0-45.43 18.04-88.99 50.16-121.12a171.303 171.303 0 01121.12-50.16h21.03c34.29-.07 67.79-10.38 96.18-29.6a172.109 172.109 0 0063.22-78.3l117.95-296.55a166.732 166.732 0 0168.58-82.29 219.479 219.479 0 01110.94-30.48h1991.44c26.76-.03 53.3 4.83 78.33 14.33a166.07 166.07 0 0182.29 71.93l202.68 345.31c15.1 25.8 36.69 47.19 62.62 62.05a171.337 171.337 0 0085.19 22.68h4767.36c45.5 0 89 18.05 121.1 50.17 32.2 32.12 50.2 75.69 50.2 121.12v4336.12c0 22.49-4.4 44.76-13 65.54-8.6 20.79-21.2 39.67-37.2 55.57-15.9 15.91-34.7 28.53-55.5 37.13-20.8 8.61-43.1 13.04-65.6 13.04z" fill="%23B75400"/><path opacity=".1" d="M10413.8 7858.33H2665.99c-22.49 0-44.77-4.43-65.55-13.04a171.153 171.153 0 01-55.57-37.13 171.259 171.259 0 01-37.13-55.57 171.394 171.394 0 01-13.03-65.54V3351.84c0-45.43 18.04-88.99 50.16-121.12a171.303 171.303 0 01121.12-50.16h21.03c34.29-.07 67.79-10.38 96.18-29.6a172.109 172.109 0 0063.22-78.3l117.95-296.55a166.732 166.732 0 0168.58-82.29 219.479 219.479 0 01110.94-30.48h1991.44c26.76-.03 53.3 4.83 78.33 14.33a166.07 166.07 0 0182.29 71.93l202.68 345.31c15.1 25.8 36.69 47.19 62.62 62.05a171.337 171.337 0 0085.19 22.68h4767.36c45.5 0 89 18.05 121.1 50.17 32.2 32.12 50.2 75.69 50.2 121.12v4336.12c0 22.49-4.4 44.76-13 65.54-8.6 20.79-21.2 39.67-37.2 55.57-15.9 15.91-34.7 28.53-55.5 37.13-20.8 8.61-43.1 13.04-65.6 13.04z" fill="%23263238"/><path d="M10413.8 7858.33H2665.99c-22.49 0-44.77-4.43-65.55-13.04a171.153 171.153 0 01-55.57-37.13 171.259 171.259 0 01-37.13-55.57 171.394 171.394 0 01-13.03-65.54V3351.84c0-45.43 18.04-88.99 50.16-121.12a171.303 171.303 0 01121.12-50.16h21.03c34.29-.07 67.79-10.38 96.18-29.6a172.109 172.109 0 0063.22-78.3l117.95-296.55a166.732 166.732 0 0168.58-82.29 219.479 219.479 0 01110.94-30.48h1991.44c26.76-.03 53.3 4.83 78.33 14.33a166.07 166.07 0 0182.29 71.93l202.68 345.31c15.1 25.8 36.69 47.19 62.62 62.05a171.337 171.337 0 0085.19 22.68h4767.36c45.5 0 89 18.05 121.1 50.17 32.2 32.12 50.2 75.69 50.2 121.12v4336.12c0 22.49-4.4 44.76-13 65.54-8.6 20.79-21.2 39.67-37.2 55.57-15.9 15.91-34.7 28.53-55.5 37.13-20.8 8.61-43.1 13.04-65.6 13.04v0z" stroke="%23263238" stroke-miterlimit="10"/><path d="M4683.95 3165.93H3444.1c-29.59 0-57.96-11.76-78.88-32.68a111.538 111.538 0 01-32.67-78.87c-.04-14.68 2.81-29.22 8.4-42.79 5.59-13.56 13.8-25.9 24.16-36.29a111.564 111.564 0 0178.99-32.78h1239.85c29.66 0 58.11 11.79 79.09 32.76a111.854 111.854 0 0132.76 79.1c0 14.67-2.9 29.2-8.52 42.76a111.628 111.628 0 01-24.26 36.22 111.589 111.589 0 01-79.07 32.57z" fill="%23fff"/><path d="M10413.8 8614.8H2665.99c-45.43 0-88.99-18.05-121.12-50.17a171.286 171.286 0 01-50.16-121.12v-4335.2c0-45.43 18.04-89 50.16-121.12a171.313 171.313 0 01121.12-50.17h21.03c34.3-.03 67.81-10.31 96.22-29.54a171.9 171.9 0 0063.18-78.35l117.95-296.25a165.549 165.549 0 0168.58-82.29 216.728 216.728 0 01110.94-30.48h1991.44c26.76-.02 53.3 4.83 78.33 14.33a165.203 165.203 0 0182.29 72.23l202.68 345.62c15.1 25.8 36.69 47.19 62.62 62.05a171.337 171.337 0 0085.19 22.68h4767.36c45.5 0 89 18.05 121.1 50.17 32.2 32.12 50.2 75.69 50.2 121.12v4335.2c0 45.43-18 89-50.2 121.12a171.092 171.092 0 01-121.1 50.17v0z" fill="%23263238" stroke="%23263238" stroke-miterlimit="10"/><path d="M5277.96 2272l-1230.09-152.39a112.177 112.177 0 01-74.31-42.28 112.225 112.225 0 01-22.92-82.37 111.874 111.874 0 0142.42-74.33 111.815 111.815 0 0182.54-22.59l1229.79 152.39a111.804 111.804 0 0174.41 42.21 111.83 111.83 0 0122.82 82.44 111.478 111.478 0 01-13.72 41.36 111.285 111.285 0 01-28.51 32.95 111.467 111.467 0 01-82.43 22.61z" fill="%23B75400"/><path opacity=".5" d="M5277.96 2272l-1230.09-152.39a112.177 112.177 0 01-74.31-42.28 112.225 112.225 0 01-22.92-82.37 111.874 111.874 0 0142.42-74.33 111.815 111.815 0 0182.54-22.59l1229.79 152.39a111.804 111.804 0 0174.41 42.21 111.83 111.83 0 0122.82 82.44 111.478 111.478 0 01-13.72 41.36 111.285 111.285 0 01-28.51 32.95 111.467 111.467 0 01-82.43 22.61z" fill="%23fff"/><path d="M4683.95 3922.7H3444.1a111.564 111.564 0 01-78.99-32.78 111.631 111.631 0 01-24.16-36.3c-5.59-13.56-8.44-28.1-8.4-42.78a111.851 111.851 0 01111.55-111.85h1239.85a111.848 111.848 0 01111.85 111.85c0 29.67-11.78 58.12-32.76 79.1a111.89 111.89 0 01-79.09 32.76z" fill="%23B75400"/><path opacity=".5" d="M4683.95 3922.7H3444.1a111.564 111.564 0 01-78.99-32.78 111.631 111.631 0 01-24.16-36.3c-5.59-13.56-8.44-28.1-8.4-42.78a111.851 111.851 0 01111.55-111.85h1239.85a111.848 111.848 0 01111.85 111.85c0 29.67-11.78 58.12-32.76 79.1a111.89 111.89 0 01-79.09 32.76z" fill="%23fff"/><path d="M10667.1 5240.88H2412.41c-88.7 0-160.62 71.91-160.62 160.61v4995.01c0 88.8 71.92 160.7 160.62 160.7h8254.69c88.7 0 160.6-71.9 160.6-160.7V5401.49c0-88.7-71.9-160.61-160.6-160.61z" fill="%23fff"/><path d="M10827.7 6671.82A12846.661 12846.661 0 017624.47 8863.2c-1732.68 828.69-3713.14 1399.9-4867.04 1694h7909.37c21.1 0 42-4.1 61.6-12.2 19.5-8 37.2-19.9 52.2-34.8 14.9-14.9 26.8-32.6 34.9-52.1 8.1-19.5 12.2-40.4 12.2-61.6V6671.82z" fill="%23B75400"/><path opacity=".2" d="M10827.7 6671.82A12846.661 12846.661 0 017624.47 8863.2c-1732.68 828.69-3713.14 1399.9-4867.04 1694h7909.37c21.1 0 42-4.1 61.6-12.2 19.5-8 37.2-19.9 52.2-34.8 14.9-14.9 26.8-32.6 34.9-52.1 8.1-19.5 12.2-40.4 12.2-61.6V6671.82z" fill="%23fff"/><path d="M10667.1 5240.88H2412.41c-88.7 0-160.62 71.91-160.62 160.61v4995.01c0 88.8 71.92 160.7 160.62 160.7h8254.69c88.7 0 160.6-71.9 160.6-160.7V5401.49c0-88.7-71.9-160.61-160.6-160.61z" stroke="%23263238" stroke-miterlimit="10"/><path d="M2375.84 5707.8v-213.35c.08-42.63 17.07-83.48 47.24-113.59a160.91 160.91 0 01113.69-47.03h348.97M2375.84 8947.92V5967.78M10703.4 9964.67v337.43c0 21.1-4.1 42-12.2 61.5-8 19.5-19.8 37.3-34.8 52.2-14.9 15-32.6 26.8-52.1 34.9-19.5 8.1-40.4 12.3-61.5 12.3h-281.4M10703.4 5632.82v4081.02" stroke="%23263238" stroke-miterlimit="10"/><path d="M7814.66 7184.77H5264.55c-45.95 0-83.2 37.25-83.2 83.2v1301.11c0 45.95 37.25 83.21 83.2 83.21h2550.11c45.95 0 83.2-37.26 83.2-83.21V7267.97c0-45.95-37.25-83.2-83.2-83.2z" fill="%23263238" stroke="%23263238" stroke-miterlimit="10"/><path d="M7814.66 7184.77H5264.55c-45.95 0-83.2 37.25-83.2 83.2v279.79c0 45.95 37.25 83.21 83.2 83.21h2550.11c45.95 0 83.2-37.26 83.2-83.21v-279.79c0-45.95-37.25-83.2-83.2-83.2zM2855.26 2719.73l55.78 103.93L3029.6 2909a46.07 46.07 0 0025.62 8.9c9.24.33 18.37-2.14 26.19-7.08l10.36-6.7a36.279 36.279 0 0015.79-20.16c2.63-8.41 2.11-17.5-1.46-25.56l-67.36-154.83 45.41 35.36a35.06 35.06 0 0025.34 7.07 35.052 35.052 0 0023.12-12.56v0a35.348 35.348 0 007.76-22.09c0-8.04-2.74-15.83-7.76-22.1l-105.76-133.8-132.27 20.42-39.32 143.86z" fill="%23fff" stroke="%23263238" stroke-miterlimit="10"/><path d="M3092.99 2904.12l-106.06-139.29M3030.81 2909l-83.2-110.33" stroke="%23263238" stroke-width=".5" stroke-linecap="round" stroke-linejoin="round"/><path d="M4600.44 1711.51l165.8 9.75L4968 1850.19s11.28 39.31-16.76 44.8c-28.04 5.49-179.52-50.29-179.52-50.29l-161.84-2.13-9.44-131.06z" fill="%23fff" stroke="%23263238" stroke-miterlimit="10"/><path d="M4608.97 1822.15l174.03 78.63s28.04-39.32-11.28-56.08l-57.3-39.32" fill="%23fff"/><path d="M4608.97 1822.15l174.03 78.63s28.04-39.32-11.28-56.08l-57.3-39.32" stroke="%23263238" stroke-linejoin="round"/><path d="M10757.3 4794.37l-71.9-215.17-80.8-110.64c-1.3-2.02-3.3-3.54-5.6-4.33-2.2-.8-4.7-.81-7-.04-2.3.76-4.3 2.26-5.6 4.26-1.4 2.01-2 4.4-1.9 6.82v318.8l61 80.15 111.8-79.85z" fill="%23fff"/><path d="M11929.5 5735.23l-603.5 21.33c-22.2.78-44.3-4.79-63.5-16.07a117.62 117.62 0 01-45-47.63l-460.2-898.49s-103.6 56.08-111.5 79.85c-8 23.78 340.7 898.19 447.7 1166.71 9 22.54 24.7 41.73 45.1 54.94 20.4 13.21 44.3 19.78 68.6 18.81l674.5-28.65" fill="%23fff"/><path d="M11929.5 5735.23l-603.5 21.33c-22.2.78-44.3-4.79-63.5-16.07a117.62 117.62 0 01-45-47.63l-460.2-898.49s-103.6 56.08-111.5 79.85c-8 23.78 340.7 898.19 447.7 1166.71 9 22.54 24.7 41.73 45.1 54.94 20.4 13.21 44.3 19.78 68.6 18.81l674.5-28.65" stroke="%23263238" stroke-miterlimit="10"/><path d="M10801.5 4906.23l-94.5 39.01" stroke="%23263238" stroke-width=".75" stroke-miterlimit="10"/><g opacity=".5"><g opacity=".5"><path d="M11929.5 5735.23l-603.5 21.33c-22.2.78-44.3-4.79-63.5-16.07a117.62 117.62 0 01-45-47.63l-460.2-898.49s-103.6 56.08-111.5 79.85c-8 23.78 340.7 898.19 447.7 1166.71 9 22.54 24.7 41.73 45.1 54.94 20.4 13.21 44.3 19.78 68.6 18.81l674.5-28.65" fill="%23B75400"/><path d="M11929.5 5735.23l-603.5 21.33c-22.2.78-44.3-4.79-63.5-16.07a117.62 117.62 0 01-45-47.63l-460.2-898.49s-103.6 56.08-111.5 79.85c-8 23.78 340.7 898.19 447.7 1166.71 9 22.54 24.7 41.73 45.1 54.94 20.4 13.21 44.3 19.78 68.6 18.81l674.5-28.65" stroke="%23263238" stroke-miterlimit="10"/></g><path opacity=".5" d="M10801.5 4906.23l-94.5 39.01" stroke="%23263238" stroke-width=".75" stroke-miterlimit="10"/></g><path d="M10757.3 4794.37l-71.9-215.17-80.8-110.64c-1.3-2.02-3.3-3.54-5.6-4.33-2.2-.8-4.7-.81-7-.04-2.3.76-4.3 2.26-5.6 4.26-1.4 2.01-2 4.4-1.9 6.82v318.8l61 80.15 111.8-79.85z" fill="%23B75400"/><path opacity=".5" d="M10757.3 4794.37l-71.9-215.17-80.8-110.64c-1.3-2.02-3.3-3.54-5.6-4.33-2.2-.8-4.7-.81-7-.04-2.3.76-4.3 2.26-5.6 4.26-1.4 2.01-2 4.4-1.9 6.82v318.8l61 80.15 111.8-79.85z" fill="%23fff"/><path d="M10757.3 4794.37l-71.9-215.17-80.8-110.64c-1.3-2.02-3.3-3.54-5.6-4.33-2.2-.8-4.7-.81-7-.04-2.3.76-4.3 2.26-5.6 4.26-1.4 2.01-2 4.4-1.9 6.82v318.8l61 80.15 111.8-79.85z" stroke="%23263238" stroke-miterlimit="10"/><path d="M12116.3 5167.42c-28.9 36.73-49.7 79.23-60.9 124.66-8.9 58.52 5.2 283.75 5.2 283.75l-314 35.35s23.8-228.89 25-266.98c10.1-47.25 30.1-91.81 58.7-130.7 28.7-38.89 65.3-71.23 107.4-94.84 107.9-53.03 199.7-27.13 178.6 48.76z" fill="%23fff"/><path d="M12114.2 5169.86c-57-15.54-126.2-32.92-184.7-46.94-40.2 23.95-75.1 55.93-102.4 93.95a341.651 341.651 0 00-56.4 127.02c0 14.63-4.3 57.3-8.5 104.24 30.5-7.01 78.9-17.68 114.9-24.08 28.5-4.6 56.5-11.64 83.8-21.03l-10.7 182.87h7l102.4-11.58s-14-225.24-5.1-283.76c11.1-44.01 31.5-85.15 59.7-120.69z" fill="%23B75400" opacity=".5"/><path d="M12116.3 5167.42c-28.9 36.73-49.7 79.23-60.9 124.66-8.9 58.52 5.2 283.75 5.2 283.75l-314 35.35s23.8-228.89 25-266.98c10.1-47.25 30.1-91.81 58.7-130.7 28.7-38.89 65.3-71.23 107.4-94.84 107.9-53.03 199.7-27.13 178.6 48.76z" stroke="%23263238" stroke-width="1.004" stroke-miterlimit="10"/><path d="M12181.6 5206.13c260.2-343.79-367.3-701-532.2-359.34-23 42.14-41.2 86.71-54.2 132.89-25 15.24-91.5 56.08-103.7 67.35-12.2 11.28 30.5 40.24 54 54.56-44.8 110.03-38.1 225.84-25.3 252.05 22.2 45.11 132 45.72 204.2 32.31 72.2-13.41 100.9-82.59 121.9-101.49 21-18.9 125.9 5.18 162.7 16.15 36.9 10.97 122-26.51 172.6-94.48z" fill="%23fff"/><path d="M11924 5173.21s5.5 25.91-46.9 46.94c-52.4 21.03-62.8 5.18-78.3 41.76-6.6 24.04-20 45.7-38.5 62.39-18.6 16.69-41.5 27.72-66.1 31.78-49.6 9.43-99.8 15.84-150.2 19.2 41.4 23.17 123.7 21.34 182.8 10.67 71.9-13.1 100.9-82.59 121.9-101.49 21.1-18.9 125.9 5.18 162.8 16.15 8.6 1.73 17.5 1.73 26.2 0 13.8-30.62 22-63.43 24.4-96.92l-138.1-30.48z" fill="%23B75400" opacity=".5"/><path d="M12181.6 5206.13c260.2-343.79-367.3-701-532.2-359.34-23 42.14-41.2 86.71-54.2 132.89-25 15.24-91.5 56.08-103.7 67.35-12.2 11.28 30.5 40.24 54 54.56-44.8 110.03-38.1 225.84-25.3 252.05 22.2 45.11 132 45.72 204.2 32.31 72.2-13.41 100.9-82.59 121.9-101.49 21-18.9 125.9 5.18 162.7 16.15 36.9 10.97 122-26.51 172.6-94.48z" stroke="%23263238" stroke-miterlimit="10"/><path d="M11673.2 5009.85c-6.7 14.63-18 23.77-25.3 20.42-7.3-3.35-7.9-17.98 0-32.61 7.9-14.63 18-23.77 25.3-20.42 7.3 3.35 6.7 17.98 0 32.61z" fill="%23263238"/><path d="M11667.1 4915.98s30.5-25.3 36.6 32.91M11539.4 5160.72s0 30.48 54.8 30.48" stroke="%23263238" stroke-width=".5" stroke-linecap="round" stroke-linejoin="round"/><path d="M11465 7155.2l-24.1 298.08s-166.7 1186.82-158.8 1323.05c8 136.24 26 1543.67 26 1543.67l200.8 32.1 225.5-1561.14 316.7-1586.38-586.1-49.38z" fill="%23B75400" stroke="%23263238" stroke-miterlimit="10"/><path opacity=".2" d="M11465 7155.2l-24.1 298.08s-166.7 1186.82-158.8 1323.05c8 136.24 26 1543.67 26 1543.67l200.8 32.1 225.5-1561.14 316.7-1586.38-586.1-49.38z" fill="%23263238"/><path d="M11719.2 8239.31s-77.1 453.82-135.3 676.31c-58.2 222.49-57.9 444.37-57.9 685.76 0 241.38-86.9 686.32-86.9 686.32" stroke="%23263238" stroke-width=".75" stroke-miterlimit="10"/><path d="M11872.5 7082.06c132.3-69.49 274.3-115.52 314.8-23.17 80.5 184.7-15.8 465.4-15.8 465.4L12245 8819l134.4 1562-200.9-32.3s-308.4-1318.18-356.6-1398.64c-48.1-80.46-124-1209.07-124-1209.07l-152.4-138.67" fill="%23B75400"/><path d="M11872.5 7082.06c132.3-69.49 274.3-115.52 314.8-23.17 80.5 184.7-15.8 465.4-15.8 465.4L12245 8819l134.4 1562-200.9-32.3s-308.4-1318.18-356.6-1398.64c-48.1-80.46-124-1209.07-124-1209.07l-152.4-138.67" stroke="%23263238" stroke-miterlimit="10"/><path opacity=".2" d="M11872.5 7082.06c132.3-69.49 274.3-115.52 314.8-23.17 80.5 184.7-15.8 465.4-15.8 465.4L12245 8819l134.4 1562-200.9-32.3s-308.4-1318.18-356.6-1398.64c-48.1-80.46-124-1209.07-124-1209.07l-152.4-138.67" fill="%23263238"/><path d="M12029.2 8062.84c4.5 300.21 35 444.68 58.8 523.92 28.9 96.61 19.2 280.09 19.2 365.74 0 85.64-38.7-19.21 48.4 377.01 87.2 396.22 144.8 946.69 144.8 946.69M12029.2 7408.48s9.4-19.51 0 434.61v70.71" stroke="%23263238" stroke-width=".75" stroke-miterlimit="10"/><path d="M11583.3 7322.22l-6.4 135.94-31.4 94.48 46.9 54.86M11521.7 7403.29s78.6 78.64 282.8 54.87" stroke="%23263238" stroke-width=".75" stroke-linecap="round" stroke-linejoin="round"/><path d="M12004.2 7335.33c152.4-30.48 162.1-72.54 214.8-107.89 1-57.64-9.3-114.91-30.4-168.55-40-91.43-182.9-46.32-314.9 23.17l-64 101.18-343.5-28.04-10.9 134.72c176.3 60.5 365 76.11 548.9 45.41z" fill="%23263238"/><path d="M11499.5 7248.47l-3.4 53.64 87.2 20.11 6.7-70.4-90.5-3.35z" fill="%23fff" stroke="%23263238" stroke-width=".75" stroke-miterlimit="10"/><path d="M12107.8 7328.02l-14.6-133.5 44.2-14.63 22.2 118.56" fill="%23B75400"/><path d="M12107.8 7328.02l-14.6-133.5 44.2-14.63 22.2 118.56" stroke="%23263238" stroke-miterlimit="10"/><path d="M11767.1 7372.51l-29.6-155.74h74.1l29.5 133.49" fill="%23B75400"/><path d="M11767.1 7372.51l-29.6-155.74h74.1l29.5 133.49" stroke="%23263238" stroke-miterlimit="10"/><g opacity=".2" fill="%23263238"><path opacity=".2" d="M12107.8 7328.02l-14.6-133.5 44.2-14.63 22.2 118.56M11767.1 7372.51l-29.6-155.74h74.1l29.5 133.49"/></g><path d="M11425.7 5973.87s-25.3 169.16-101.2 457.17c-75.9 288.02-152.4 633.34-152.4 633.34l42.4 177.38 126.5-185.91 84.7-1081.98zM11636.9 5729.13s-177.4 42.06-194.1 126.49c-9.1 38.86-14.8 78.42-17.1 118.25l270.3-219.44 338-135.32-397.1 110.02z" fill="%23263238" stroke="%23263238" stroke-miterlimit="10"/><path d="M11685.4 5663.91s-144.2 163.06-201.5 230.11c-57.3 67.05-57.6 786.64-57.6 892.4 0 105.76-57.3 392.86 38.4 450.46 95.7 57.61 681.2 38.41 738.8-57.6 57.6-96 95.7-1246.86 86.3-1352.31-7.2-47.31-25.9-92.15-54.3-130.61-28.5-38.46-66-69.38-109.1-90.05-66.8-30.79-441 57.6-441 57.6z" fill="%23fff"/><path d="M12126.4 5606.31c-8-3.22-16.4-5.08-25-5.49l-41.5 21.64a393.295 393.295 0 01136 224.93c19.3 128.35 17.5 258.98-5.2 386.77-20.7 141.11-355.4 0-292.6 52.42 62.8 52.42 297.8 141.11 308.4 188.05 10.7 46.94-116.4 125.26-162.1 130.75-45.7 5.49 30.5 109.72 78.3 198.41 47.9 88.69 30.5 213.35-78.3 298.08-108.8 84.73-361.5 126.48-470.6 130.75-35.3 0-57.3 9.14-64 19.5 167.6 37.49 642.2 13.11 693.7-72.84 57.6-96 95.7-1246.86 86.3-1352.31-7.2-47.31-25.9-92.15-54.3-130.61-28.5-38.46-66-69.38-109.1-90.05z" fill="%23B75400" opacity=".5"/><path d="M11685.4 5663.91s-144.2 163.06-201.5 230.11c-57.3 67.05-57.6 786.64-57.6 892.4 0 105.76-57.3 392.86 38.4 450.46 95.7 57.61 681.2 38.41 738.8-57.6 57.6-96 95.7-1246.86 86.3-1352.31-7.2-47.31-25.9-92.15-54.3-130.61-28.5-38.46-66-69.38-109.1-90.05-66.8-30.79-441 57.6-441 57.6z" stroke="%23263238" stroke-miterlimit="10"/><path d="M11980.1 6393.86c-154.5-48.15-289.9-182.87-289.9-182.87 34.3 160.08 127.4 301.47 260.9 396.22" fill="%23fff"/><path d="M11980.1 6393.86c-154.5-48.15-289.9-182.87-289.9-182.87 34.3 160.08 127.4 301.47 260.9 396.22" stroke="%23263238" stroke-width=".75" stroke-linecap="round" stroke-linejoin="round"/><path d="M12097.7 5500.85l-460.5 105.46-28.6 134.41 517.8-134.41-28.7-105.46z" fill="%23fff" stroke="%23263238" stroke-miterlimit="10"/><path d="M11535.7 10553.2l-26.8-202.4-200.8-32-167.4 119.2-149.9 82.3v32.9h544.9zM12404.4 10569.1l-25-188.1-200.9-32.3-167.3 119.2-150 82.6v18.6h543.2z" fill="%23263238" stroke="%23263238" stroke-miterlimit="10"/><path d="M10669.5 4618.82l-123.7-71.63s-48.2-5.79-27.4 47.85l123.7 95.4" fill="%23fff"/><path d="M10669.5 4618.82l-123.7-71.63s-48.2-5.79-27.4 47.85l123.7 95.4" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M10651.3 4805.04c-5.9-14.7-14.5-28.15-25.3-39.62l-23.2-25-125.9-156.04s-39-26.21-30.5 30.47l78.1 152.39-138.7-130.14s-26.2-21.64-26.2 8.84 125.9 164.89 125.9 164.89l-139-65.22s-30.5 21.64-8.6 43.27c22 21.64 138.7 65.23 138.7 65.23l-103.9-4.27s-30.5 25.91-8.9 34.75c21.7 8.83 143.3 34.44 143.3 34.44 15.4 13.13 33.1 23.45 52.1 30.47l30.5 56.39 116.7-58.82-55.1-142.03z" fill="%23fff" stroke="%23263238" stroke-linecap="round" stroke-linejoin="round"/><path d="M11897.5 6157.96l-695.5 163.06c-35.6 6.27-72.3.01-103.8-17.72a156.197 156.197 0 01-69-79.51l-438.9-1219.12 116.7-58.82 484.9 898.19c11 20.54 28.3 37 49.4 46.93 21.1 9.94 44.8 12.82 67.7 8.23l531.8-150.26" fill="%23fff"/><path d="M11897.5 6157.96l-695.5 163.06c-35.6 6.27-72.3.01-103.8-17.72a156.197 156.197 0 01-69-79.51l-438.9-1219.12 116.7-58.82 484.9 898.19c11 20.54 28.3 37 49.4 46.93 21.1 9.94 44.8 12.82 67.7 8.23l531.8-150.26" stroke="%23263238" stroke-miterlimit="10"/><path d="M10772.6 5060.75l-135.4 67.66" stroke="%23263238" stroke-width=".75" stroke-miterlimit="10"/><path d="M11810.9 4850.45s-74 74.06-37.1 129.53c21.8 32.04 38.5 67.32 49.3 104.54 0 0-30.4 74.06-6.1 74.06 24.4 0 12.2-55.47 55.5-42.97s86.3 86.25 49.4 110.94c-27.6 15.42-56.8 27.69-87.2 36.57a20.75 20.75 0 00-9.9 6.58c-2.6 3.11-4.2 6.9-4.6 10.92-.5 4.02.3 8.08 2.1 11.68 1.8 3.61 4.6 6.6 8.1 8.62 40.1 27.08 86.3 43.84 134.5 48.76 39.3.84 78.6-3.25 117-12.19 0 0 121.9-166.41 209.7-209.69 87.8-43.28 49.4-240.47 49.4-265.16 0-24.68-86.3-80.16-86.3-80.16s24.7-55.47-86.2-178.6c-111-123.13-320.7-148.12-326.8-104.84-2.1 11.46-.9 23.29 3.4 34.09a61.285 61.285 0 0021.3 26.87s-185-80.16-271.2 6.09c-86.3 86.25 215.7 284.36 215.7 284.36z" fill="%23263238" stroke="%23263238" stroke-miterlimit="10"/><path d="M11810.9 4850.45s150 182.87 372.2 200.55M11757.9 4906.23s69.8 202.98 358.4 260.89" stroke="%23fff" stroke-width=".5" stroke-linecap="round" stroke-linejoin="round"/></svg>`

const useToggle = (initialState = false) => {
  const [expanded, setExpanded] = useState(initialState)
  const toggle = useCallback(() => setExpanded((prev) => !prev), [])
  return [expanded, toggle]
}

const useMenuToggle = (initialId = '') => {
  const [expandedMenu, setExpandedMenu] = useState(initialId)

  const toggleMenu = useCallback((nextId = '') =>
    setExpandedMenu((prevId) => (prevId !== nextId ? nextId : ''))
  )

  return [expandedMenu, toggleMenu]
}

const useOutsideClicksEffect = (id, toggle) => {
  const globalClickHandler = useCallback(
    (event) => {
      const containerElement = event.target.closest(`#${id}`)
      if (containerElement == null) toggle()

      const linkElement = event.target.closest('a')
      if (linkElement != null) toggle()
    },
    [id, toggle]
  )

  useEffect(() => {
    document.body.addEventListener('click', globalClickHandler)
    return () => document.body.removeEventListener('click', globalClickHandler)
  }, [globalClickHandler])
}

const Menu = ({
  children,
  label,
  id,
  className,
  expanded,
  onExpand,
  tag: Tag = 'div',
  ...restProps
}) => {
  const titleId = `${id}-title`
  return (
    <Tag className={classNames.use(styles.menu).join(className)} {...restProps}>
      <Button
        role="button"
        id={titleId}
        className={styles.menuTitle}
        aria-haspopup="true"
        aria-expanded={expanded}
        onClick={onExpand}
      >
        {label}
      </Button>
      <ul
        className={classNames.use(styles.menuList, expanded && styles.expanded)}
        aria-labelledby={titleId}
      >
        {children}
      </ul>
    </Tag>
  )
}

const Group = ({
  children,
  className,
  id,
  label,
  tag: Tag = 'div',
  labelTag: LabelTag = 'h3',
  href,
  ...restProps
}) => {
  const titleId = `${id}-title`
  return (
    <Tag
      className={classNames.use(styles.group).join(className)}
      {...restProps}
    >
      <LabelTag
        id={titleId}
        className={styles.groupTitle}
        href={LabelTag === 'a' ? href : null}
      >
        {label}
      </LabelTag>
      <ul className={styles.groupList} aria-labelledby={titleId}>
        {children}
      </ul>
    </Tag>
  )
}

const Item = ({ children, href, className, ...passProps }) => (
  <li className={classNames.use(styles.item).join(className)} {...passProps}>
    <a className={styles.itemLink} href={href}>
      {children}
    </a>
  </li>
)

const Header = ({ children, className, id, ...passProps }) => {
  const navId = `${id}-nav`
  const [navExpanded, toggleNav] = useToggle()
  const [expandedMenu, toggleMenu] = useMenuToggle()

  useOutsideClicksEffect(id, toggleMenu)

  return (
    <AppBar
      id={id}
      className={classNames
        .use(styles.container, expandedMenu && styles.expanded)
        .join(className)}
      tag="header"
      {...passProps}
    >
      <AppBar.Item className={styles.logoContainer}>
        <a href="https://core.ac.uk/" className={styles.logoLink}>
          <Logo className={styles.logo} />
          <p className={styles.peace}>
            <span role="img" aria-label="Ukranian Flag">
              🇺🇦&nbsp;
            </span>
            <i>&nbsp; make metadata, not war</i>
          </p>
        </a>
      </AppBar.Item>

      <SearchBarOrEmpty />

      <AppBar.Item className={styles.toggleContainer}>
        <Button
          type="button"
          className={styles.toggleButton}
          aria-controls={navId}
          aria-expanded={navExpanded}
          aria-label="Toggle navigation"
          onClick={toggleNav}
        >
          <Icon src="#menu" alt="Menu icon" aria-hidden />
        </Button>
      </AppBar.Item>

      <AppBar.Item
        id={navId}
        className={classNames.use(styles.nav, navExpanded && styles.expanded)}
        tag="nav"
      >
        <Menu
          id="services"
          label="Services"
          className={styles.servicesMenu}
          expanded={expandedMenu === 'services'}
          onExpand={() => toggleMenu('services')}
        >
          <Item className={styles.servicesOverviewItem} href="/services">
            <img src={`data:image/svg+xml,${SERVICES_ILLUSTRATION}`} alt="" />
            <span className={styles.servicesOverviewItemLabel}>
              Services overview
            </span>
            <span className={styles.servicesOverviewItemDescription}>
              Explore all CORE services
            </span>
          </Item>

          <Group id="access-to-raw-data" label="Access to raw data" tag="li">
            <Item href="/services/api">API</Item>
            <Item href="/services/dataset">Dataset</Item>
            <Item href="/services/fastsync">FastSync</Item>
          </Group>

          <Group id="content-discovery" label="Content discovery" tag="li">
            <Item href="/services/recommender">Recommender</Item>
            <Item href="/services/discovery">Discovery</Item>
          </Group>

          <Group id="oai-resolver" label="OAI identifiers" tag="li">
            <Item href="/documentation/oai-resolver">OAI Resolver</Item>
          </Group>
          <Group id="managing-content" label="Managing content" tag="li">
            <Item href="/services/repository-dashboard">Dashboard</Item>
          </Group>
          <Group id="contracts" label="Bespoke contracts" tag="li">
            <Item href="/services/consultancy">Consultancy services</Item>
          </Group>
        </Menu>
        <Menu
          id="communities"
          label="Support us"
          className={styles.communitiesMenu}
          expanded={expandedMenu === 'communities'}
          onExpand={() => toggleMenu('communities')}
        >
          <Group
            id="membership"
            label="Support us"
            tag="li"
            labelTag="a"
            className={styles.supportMenu}
          >
            <Button
              href="/membership"
              variant="contained"
              className={styles.memberMenuItem}
            >
              <span className={styles.memberMenuText}>Membership</span>
            </Button>
            <Button
              href="/sponsorship"
              variant="contained"
              className={styles.memberMenuItem}
            >
              <span className={styles.memberMenuText}>Sponsorship</span>
            </Button>
            <Button
              href="/governance/research"
              variant="contained"
              className={styles.memberMenuItem}
            >
              <span className={styles.memberMenuText}>
                Research partnership
              </span>
            </Button>
          </Group>
        </Menu>
        <Menu
          id="about"
          label="About"
          expanded={expandedMenu === 'about'}
          onExpand={() => toggleMenu('about')}
          className={styles.aboutMenu}
        >
          <Group id="about" label="About" tag="li">
            <Item href="/about">About us</Item>
            <Item href="/about#mission">Our mission</Item>
            <Item href="/about#team">Team</Item>
            <Item href="//blog.core.ac.uk">Blog</Item>
            <Item href="/faq">FAQs</Item>
            <Item href="/contact">Contact us</Item>
          </Group>
          <Group id="community" label="Community governance" tag="li">
            <Item href="/governance" className={styles.communitiesMenuItem}>
              Governance
            </Item>
            <Item href="/governance/advisory">Advisory Board</Item>
            <Item href="/governance/supporters">Board of supporters</Item>
            <Item href="/governance/research">Research network</Item>
          </Group>
          <Group id="innovations" label="Innovations" tag="li">
            <Item href="/about/research-outputs">Our research</Item>
            <Item href="/innovations/labs">CORE Labs</Item>
          </Group>
        </Menu>
      </AppBar.Item>
    </AppBar>
  )
}

Header.useSearchBar = useSearchBar

export default Header
